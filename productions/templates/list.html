{% extends 'base.html' %}
{% load static %}
{% load color_filters %}

{% block content %}
<style>
    /* Image hover effect */
    .grid__wraper__img__inner {
        position: relative;
        overflow: hidden;
    }
    
    .grid__wraper__img__inner .primary__image {
        transition: opacity 0.3s ease;
        display: block;
        width: 100%;
    }
    
    .grid__wraper__img__inner .secondary__image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .grid__wraper__img:hover .secondary__image {
        opacity: 1;
    }
    
    .grid__wraper__img:hover .primary__image {
        opacity: 0;
    }
    
    /* Custom styles for better product grid centering */
    .shop .container {
        max-width: 1200px;
    }
    
    .grid__responsive {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
    }
    
    .pagination__wraper {
        display: flex;
        justify-content: center;
        margin-top: 40px;
    }
    
    .pagination__wraper ul {
        display: flex;
        justify-content: center;
        align-items: center;
        list-style: none;
        padding: 0;
        margin: 0;
    }
    
    /* Center category title */
    .category h2 {
        text-align: center;
    }
    
    /* Better spacing for product items */
    .grid__wraper {
        margin-bottom: 30px;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .grid__responsive {
            justify-content: space-around;
        }
    }
</style>

        <!-- breadcrumb__start -->
        <div class="breadcrumb">
            <div class="container">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="breadcrumb__title">
                            <h1>فروشگاه</h1>
                            <ul>
                                <li>
                                    <a href="#">خانه</a>
                                </li>
                                <li class="color__blue">
                                    محصولات
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
         <!-- breadcrumb__end -->



    <!-- shop__section__start-->
        <div class="shop sp_top_80">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-xl-10 col-lg-10 col-md-12 col-sm-12 col-12">
                        <div class="shop__right__wraper">
                            <div class="shop__tab">
                                <ul class="nav " id="myTab" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="shop__tap__link active" data-bs-toggle="tab" data-bs-target="#projects__one" type="button">
                                            <i class="fas fa-th-large"></i>
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="shop__tap__link" data-bs-toggle="tab" data-bs-target="#projects__two" type="button">
                                            <i class="fas fa-list"></i>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </div>


                        <div class="tab-content " id="myTabContent">
                                <div class="tab-pane fade active show" id="projects__one" role="tabpanel" aria-labelledby="projects__one">
                                    <div class="row grid__responsive">
                                        {% for product in products %}
                                            <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 col-6">
                                                <div class="grid__wraper">
                                                    <div class="grid__wraper__img">
                                                        <div class="grid__wraper__img__inner">
                                                            <a href="{{ product.get_absolute_url }}">
                                                                <img class="primary__image" src="{{ product.main_image.url }}" alt="Primary Image">
                                                                {% if product.secondary_image %}
                                                                    <img class="secondary__image" src="{{ product.secondary_image.url }}" alt="Secondary Image">
                                                                {% endif %}
                                                            </a>
                                                        </div>
                                                        <div class="grid__wraper__icon">
                                                            <ul>
                                                                <li>
                                                                    <span data-bs-toggle="modal" data-bs-target="#exampleModal">
                                                                        <a  href="{{ product.get_absolute_url }}" title="مشاهده سریع" >
                                                                            <i class="far fa-eye"></i>
                                                                        </a>
                                                                    </span>
                                                                </li>

                                                                <li>
                                                                    <a href="{{ product.get_absolute_url }}" data-bs-toggle="tooltip" data-bs-placement="top" title="افزودن به سبد خرید" data-bs-original-title="افزودن به سبد خرید">
                                                                        <i class="fas fa-shopping-cart"></i>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>

                                                        <div class="grid__wraper__badge">
                                                            <span class="new__badge">جدید</span>
{#                                                            <span class="sale__badge">-15%</span>#}
                                                        </div>
                                                    </div>
                                                    <div class="grid__wraper__info">
                                                        <h3 class="grid__wraper__tittle">
                                                            <a href="{{ product.get_absolute_url }}" tabindex="0">{{ product.name }}</a>
                                                        </h3>
                                                        <div class="grid__wraper__price">
{#                                                            <del>72,000 تومان</del>#}
                                                            <span>{{ product.price }} تومان</span>
                                                        </div>
                                                        <div class="grid__wraper__color">
                                                            <ul class="color-categories grid-color-swatch color__img__parent d-flex justify-content-center">
                                                                {% for color in product.colors.all|slice:":4" %}
                                                                    <li class="red color_img_variant">
                                                                        <label data-bs-toggle="tooltip" data-bs-placement="top" title="{{ color.name }}" style="background: {{ color.name|translate_color }};">
                                                                        </label>
                                                                    </li>
                                                                {% endfor %}
                                                                {% if product.colors.all.count > 4 %}
                                                                    <li class="vaiant-plus-one">
                                                                        <a href="single-product.html" tabindex="0">
                                                                            <span>+{{ product.colors.all.count|add:"-4" }}</span>
                                                                        </a>
                                                                    </li>
                                                                {% endif %}
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>




                            <div class="tab-pane fade" id="projects__two" role="tabpanel" aria-labelledby="projects__two">
                                <div class="row">
                                    {% for product in products %}
                                        <div class="col-xl-12">
                                        <div class="grid__wraper grid__list__wraper">

                                            <div class="grid__wraper__img__list__swatch">
                                                <div class="grid__wraper__img grid__wraper__img__list">
                                                    <div class="grid__wraper__img__inner">
                                                        <a href="{{ product.get_absolute_url }}">
                                                            <img class="primary__image" src="{{ product.main_image.url }}" alt="Primary Image">
                                                            {% if product.secondary_image %}
                                                                <img class="secondary__image" src="{{ product.secondary_image.url }}" alt="Secondary Image">
                                                            {% endif %}
                                                        </a>
                                                    </div>


                                                    <div class="grid__wraper__badge">
                                                        <span class="new__badge">جدید</span>
{#                                                        <span class="sale__badge">-15%</span>#}
                                                    </div>

                                                </div>

                                                <div class="grid__wraper__color">
                                                    <ul class="color-categories grid-color-swatch color__img__parent d-flex justify-content-center">
                                                        {% for color in product.colors.all|slice:":4" %}
                                                                    <li class="red color_img_variant">
                                                                        <label data-bs-toggle="tooltip" data-bs-placement="top" title="{{ color.name }}" style="background: {{ color.name|translate_color }};">
                                                                        </label>
                                                                    </li>
                                                                {% endfor %}
                                                                {% if product.colors.all.count > 4 %}
                                                                    <li class="vaiant-plus-one">
                                                                        <a href="single-product.html" tabindex="0">
                                                                            <span>+{{ product.colors.all.count|add:"-4" }}</span>
                                                                        </a>
                                                                    </li>
                                                                {% endif %}
                                                    </ul>
                                                </div>

                                            </div>

                                            <div class="grid__wraper__info grid__wraper__info__list text-start">
                                                <h3 class="grid__wraper__tittle">
                                                    <a href="{{ product.get_absolute_url }}" tabindex="0">{{ product.name }}</a>
                                                </h3>
                                                <div class="grid__wraper__price">
{#                                                    <del>72,000 تومان</del>#}
                                                    <span>{{ product.price }} تومان</span>
                                                </div>

                                                <div class="gird__list__description">
                                                    <p>{{ product.specifications }}</p>
                                                </div>

                                                <div class="grid__wraper__icon grid__wraper__icon__list">
                                                    <ul>
                                                        <li>
                                                            <span data-bs-toggle="modal" data-bs-target="#exampleModal">
                                                                <a href="{{ product.get_absolute_url }}" data-bs-toggle="tooltip" data-bs-placement="top" title="نمایش سریع" data-bs-original-title="نمایش سریع">
                                                                    <i class="far fa-eye"></i>
                                                                </a>
                                                            </span>
                                                        </li>

                                                        <li>
                                                            <a href="{{ product.get_absolute_url }}" data-bs-toggle="tooltip" data-bs-placement="top" title="افزودن به سبد خرید" data-bs-original-title="افزودن به سبد خرید">
                                                                <i class="fas fa-shopping-cart"></i>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                    {% endfor %}

                                </div>
                            </div>
                        </div>


                        <div class="pagination__wraper text-center sp_top_40">
                            <ul>
                                <!-- دکمه "قبلی" -->
                                {% if page_obj.has_previous %}
                                    <li class="prev">
                                        <a href="?page={{ page_obj.previous_page_number }}">
                                            <span><i class="fas fa-angle-double-right"></i></span>
                                        </a>
                                    </li>
                                {% else %}
                                    <li class="disabled prev">
                                        <a href="#">
                                            <span><i class="fas fa-angle-double-right"></i></span>
                                        </a>
                                    </li>
                                {% endif %}

                                <!-- شماره صفحات -->
                                {% for num in page_obj.paginator.page_range %}
                                    {% if page_obj.number == num %}
                                        <li><a class="active" href="?page={{ num }}">{{ num }}</a></li>
                                    {% else %}
                                        <li><a href="?page={{ num }}">{{ num }}</a></li>
                                    {% endif %}
                                {% endfor %}

                                <!-- دکمه "بعدی" -->
                                {% if page_obj.has_next %}
                                    <li class="next">
                                        <a href="?page={{ page_obj.next_page_number }}">
                                            <span><i class="fas fa-angle-double-left"></i></span>
                                        </a>
                                    </li>
                                {% else %}
                                    <li class="disabled next">
                                        <a href="#">
                                            <span><i class="fas fa-angle-double-left"></i></span>
                                        </a>
                                    </li>
                                {% endif %}
                            </ul>
                          </div>


                    </div>
                </div>
            </div>
        </div>
    <!-- shop__section__start-->

        <!-- شروع بخش دسته‌بندی -->
        <div class="category sp_bottom_70 sp_top_80">
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center mb-4">
                        <h2 style="color: #333; font-size: 32px; font-weight: bold; margin-bottom: 30px;">دسته بندی ها</h2>
                    </div>
                </div>
                <div class="row grid__responsive row__custom__class category__slider__active slider__default__arrow">
                    {% for category in categories_context %}
                        <div class="col-12 column__custom__class">
                        <div class="category__single">
                            <div class="category__img">
                                <img src="{{ category.photo.url }}" alt="">
                            </div>
                            <div class="category__text">
                                <h5><a href="{% url 'productions:product_list_by_category' category.slug %}" tabindex="-1">{{ category.category_name }}</a></h5>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- پایان بخش دسته‌بندی -->


<!-- footer__section__start -->
  <div class="footer ">
    <div class="footer__inner sp_top_80">
    <div class="container sp_bottom_60">
        <div class="row">
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                <div class="footer__widget">
                    <h4 class="footer__title">درباره ما</h4>
                    <div class="footer__content">
                        <p>Silver Moon یک پلتفرم خرده فروشی آنلاین پویا و نوآورانه است که طیف گسترده ای از محصولات را به مشتریان در سراسر کشور ارائه می دهد.</p>
                    </div>

                    <div class="footer__bottom">
<h5>سبکی که اهمیت دارد🌖</h5>
                </div>
                </div>
            </div>

            <div class="col-xl-2 col-lg-2 col-md-6 col-sm-4 col-6">
                <div class="footer__widget">
                    <h4 class="footer__title">اطلاعات تماس</h4>
                    <div class="footer__menu">
                    <ul>
                        <li><a href="#">تلفن:09102052440</a></li>
                        <li><a href="#">ایمیل: shayanaminaei@gmail.com</a></li>
                        <li><a href="#">شعبه حضوری: تهران-خیابان مولوی،بازارچه سعادت،پاساژ پرشین٫طبقه همکف٫پلاک۳۲۰</a></li>
                    </ul>
                  </div>
                </div>
            </div>
            &emsp;
            &emsp;
            <div class="col-xl-2 col-lg-2 col-md-6 col-sm-4 col-6">
                <div class="footer__widget">
                    <h4 class="footer__title">لینک سریع</h4>
                    <div class="footer__menu">
                    <ul>
                        <li><a href="{% url 'productions:landing_page' %}">خانه</a></li>
                        <li><a href="{% url 'productions:category_list' %}">دسته بندی</a></li>
                        <li><a href="{% url 'productions:about' %}">درباره ما</a></li>
                        <li><a href="http://127.0.0.1:8000/donate/"> کمک مالی مستقیم</a></li>
                    </ul>
                  </div>
                </div>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-6 col-sm-4 col-6">
                <div class="footer__widget">
                    <h4 class="footer__title">اعتماد شما سرمایه ماست</h4>
                    <a referrerpolicy='origin' target='_blank' href='https://trustseal.enamad.ir/?id=582919&Code=xIwy1riSwGeTRkGJd8BhoFKqpINVrvzz'><img referrerpolicy='origin' src='https://trustseal.enamad.ir/logo.aspx?id=582919&Code=xIwy1riSwGeTRkGJd8BhoFKqpINVrvzz' alt='' style='cursor:pointer' code='xIwy1riSwGeTRkGJd8BhoFKqpINVrvzz'></a>
                </div>
            </div>
        </div>
    </div>
</div>
{#      <a referrerpolicy='origin' target='_blank' href='https://trustseal.enamad.ir/?id=582919&Code=xIwy1riSwGeTRkGJd8BhoFKqpINVrvzz'><img referrerpolicy='origin' src='https://trustseal.enamad.ir/logo.aspx?id=582919&Code=xIwy1riSwGeTRkGJd8BhoFKqpINVrvzz' alt='' style='cursor:pointer' code='xIwy1riSwGeTRkGJd8BhoFKqpINVrvzz'></a>#}

    <div class="copyright">
    <div class="container">
        <div class="row">
          <div class="col-12 text-center">
            <div class="copyright__text">

                <p>© <strong>Silver Moon 🌖</strong>. تمامی حقوق محفوظ است.</p>

            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
 <!-- footer__section__end -->

</main>


    <!-- JS here -->
            <script src="{% static 'js/vendor/modernizr-3.5.0.min.js' %}"></script>
            <script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>

            <script src="{% static 'js/popper.min.js' %}"></script>
            <script src="{% static 'js/bootstrap.min.js' %}"></script>
            <script src="{% static 'js/isotope.pkgd.min.js' %}"></script>
            <script src="{% static 'js/one-page-nav-min.js' %}"></script>
            <script src="{% static 'js/slick.min.js' %}"></script>
            <script src="{% static 'js/jquery.meanmenu.min.js' %}"></script>
            <script src="{% static 'js/ajax-form.js' %}"></script>
            <script src="{% static 'js/wow.min.js' %}"></script>
            <script src="{% static 'js/jquery.scrollUp.min.js' %}"></script>
            <script src="{% static 'js/imagesloaded.pkgd.min.js' %}"></script>
            <script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
            <script src="{% static 'js/waypoints.min.js' %}"></script>
            <script src="{% static 'js/jquery.counterup.min.js' %}"></script>
            <script src="{% static 'js/fontawesome.min.js' %}"></script>
            <script src="{% static 'js/plugins.js' %}"></script>
            <script src="{% static 'js/main.js' %}"></script>
            <script>
                $(document).ready(function () {
                    $("#logout-link").click(function (event) {
                        event.preventDefault(); // جلوگیری از تغییر صفحه

                        $.ajax({
                            type: "POST",
                            url: "{% url 'customers:logout' %}",  // مسیر ویو Logout
                            headers: { "X-CSRFToken": "{{ csrf_token }}" }, // ارسال CSRF برای امنیت
                            success: function (response) {
                                alert('خروج موفقیت آمیز');  // نمایش پیام موفقیت
                                window.location.href = response.redirect_url;  // ریدایرکت به صفحه اصلی
                            },
                            error: function (xhr, status, error) {
                                console.error("خطا در خروج:", error);
                            }
                        });
                    });
                });
            </script>

</body>

</html>
{% endblock %}
